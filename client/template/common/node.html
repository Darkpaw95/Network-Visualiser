<div class="node" ng-repeat="vault in vaults | orderBy:'vault_id'" ng-controller="vaultCtrl" ng-init="init(vault)"
     ng-class="{false:'dead'}[isActive]">
  <div class="box">
    <div class="notif">
      <ul>
        <li ng-class="iconsTray.account" tooltip="{{lastLog()}}" canshow="{{isToolTipEnabled(ICONS_TRAY_SHAPES.HEXAGON)}}">
        </li>
        <li ng-class="iconsTray.chunk" tooltip="{{lastLog()}}" canshow="{{isToolTipEnabled(ICONS_TRAY_SHAPES.CIRCLE)}}">
        </li>
        <li class="shape" ng-class="iconsTray.subscriber" tooltip="{{lastLog()}}" canshow="{{isToolTipEnabled(ICONS_TRAY_SHAPES.SQUARE)}}">
          <p>{{subscriber}}</p>
        </li>
        <li class="shape" ng-class="iconsTray.counter" tooltip="{{lastLog()}}" canshow="{{isToolTipEnabled(ICONS_TRAY_SHAPES.DIAMOND)}}">
          <p>{{counter}}</p>
        </li>
      </ul>
    </div>
    <div class="progress"
         ng-class="{true:'vault_start'}[networkHealth <= 0]"
         tooltip="Network Health is {{networkHealth}}%"
         canshow="{{logs[logs.length-1].action_id != 18}}">
      <div ng-style="progressLevel"></div>
    </div>
    <div class="info" ng-class="personaColour">
      <p tooltip="{{fullVaultName}}" canshow="true">{{vaultName.substring(0,6) | uppercase}}</p>
      <img ng-src="../client/imgs/icons/{{stateIcon}}" ng-click="toggleVaultLogs()">
      <a class="host-name-btn" clip-copy clip-text="{{hostName == '' ? 'Unknown' : hostName}}" title="{{hostName}}" ng-hide="hostName == ''"></a>
    </div>
  </div>
  <div class="log_slider" ng-class="{false:'close', true:personaColour+'_alpha'}[logsOpen]">
    <ul>
      <li ng-repeat="log in logs | orderBy:'-ts'" >
        <div class="log_date">
          {{log.ts | date : 'dd/MM/yyyy HH:mm:ss'}}
        </div>
        <div class="log_msg">
          {{ vaultBehaviour.formatMessage(log) }}
        </div>
      </li>
    </ul>
    <div class="see_history">
      <a target="_blank" ng-href="/client/history#?id={{vaultName}}&sn={{$root.sessionName}}">See All</a>
    </div>
  </div>
</div>